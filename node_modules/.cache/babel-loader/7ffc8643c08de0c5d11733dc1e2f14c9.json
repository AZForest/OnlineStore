{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import classes from'./Fruit.module.css';import React,{useState,useEffect}from'react';import axios from'axios';import{connect}from'react-redux';import ProductModel from'../../../components/UI/ProductModel/ProductModel';import*as actionTypes from'../../../store/actions/actionTypes';// import { remover } from '../../User/Cart/Cart';\nimport Cart,{removeHandler}from'../../User/Cart/Cart';//Images\nimport banana from'../../../assets/Fruit/Banana.jpg';import organicBanana from'../../../assets/Fruit/OrganicBanana.jpg';import blackberries from'../../../assets/Fruit/Blackberries.jpg';import blueberries from'../../../assets/Fruit/Blueberries.jpg';import pineapple from'../../../assets/Fruit/FreshPineapple.jpg';import raspberries from'../../../assets/Fruit/Raspberries.jpg';import redGrapes from'../../../assets/Fruit/RedSeedlessGrapes.jpg';import strawberries from'../../../assets/Fruit/Strawberries.jpg';import BottomBar from'../../../components/BottomBar/BottomBar';var Fruit=/*#__PURE__*/function(_React$Component){_inherits(Fruit,_React$Component);var _super=_createSuper(Fruit);function Fruit(){var _this;_classCallCheck(this,Fruit);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={products:[]};return _this;}_createClass(Fruit,[{key:\"componentDidMount\",value:function componentDidMount(){var fruit=[];var products=JSON.parse(localStorage.getItem('products'));console.log(products);for(var i=0;i<products.length;i++){if(products[i].type===\"Fruit\"){fruit.push(products[i]);}}console.log(fruit);this.setState({products:fruit});}},{key:\"addHandler\",value:function addHandler(name,price){var _this2=this;if(this.props.user===null){window.alert('Please log in or sign up to add items to cart.');}else{var data={prevCart:this.props.user.cart,product:{name:name,price:price,count:1},updateCount:false};for(var i=0;i<data.prevCart.length;i++){if(data.prevCart[i].name===data.product.name){data.updateCount=true;}}var updatedAcc;if(!data.updateCount){updatedAcc=_objectSpread(_objectSpread({},this.props.user),{},{cart:this.props.user.cart.concat(data.product)});}else{var element;for(var _i=0;_i<this.props.user.cart.length;_i++){if(this.props.user.cart[_i].name===data.product.name){element=_i;}}var newAcc=this.props.user.cart;newAcc[element].count+=1;updatedAcc=_objectSpread(_objectSpread({},this.props.user),{},{cart:newAcc});}axios.patch(\"http://onlinestoreserver.herokuapp.com/users/\".concat(this.props.user.id,\"/addProduct\"),data).then(function(response){console.log(response);_this2.props.onUpdateCart(updatedAcc);}).catch(function(err){console.log(err);});}}},{key:\"removeHandler\",value:function removeHandler(name,price){var _this3=this;var data={prevCart:this.props.user.cart,product:{name:name,price:price,count:1},updateCount:false};var cartArray=this.props.user.cart;var index2=-1;for(var i=0;i<cartArray.length;i++){if(cartArray[i].name===data.product.name){index2=i;if(cartArray[i].count>1){data.updateCount=true;}}}if(!data.updateCount){if(index2>=0){cartArray.splice(index2,1);}}else{cartArray[index2].count-=1;}var updatedAcc=_objectSpread(_objectSpread({},this.props.user),{},{cart:cartArray});//PATCH remove\naxios.patch(\"http://onlinestoreserver.herokuapp.com/users/\".concat(this.props.user.id,\"/removeProduct\"),data).then(function(response){console.log(response);_this3.props.onUpdateCart(updatedAcc);}).catch(function(err){console.log(err);});}},{key:\"imageHandler\",value:function imageHandler(item){var imgLibrary=[{name:\"Banana\",img:banana},{name:\"Organic Banana\",img:organicBanana},{name:\"Strawberries\",img:strawberries},{name:\"Blackberries\",img:blackberries},{name:\"Fresh Pineapple\",img:pineapple},{name:\"Red Seedless Grapes\",img:redGrapes},{name:\"Raspberries\",img:raspberries},{name:\"Blueberries\",img:blueberries}];var result=imgLibrary.filter(function(obj){return obj.name===item;});return result[0].img;}},{key:\"countHandler\",value:function countHandler(item){if(this.props.user!==null){var userCart=this.props.user.cart;var result=-1;for(var i=0;i<userCart.length;i++){if(userCart[i].name===item){result=userCart[i].count;}}if(result===-1){return 0;}else{return result;}//return result[0].count;\n}else{return 0;}}},{key:\"render\",value:function render(){var _this4=this;var fruitItems=this.state.products;/* for (let i = 0; i < this.state.products.length; i++) {\n            if (this.state.products[i].type === \"Fruit\") {\n                fruitItems.push(this.state.products[i]);\n            }\n        } */return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.Fruit,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Fresh Fruit\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.FruitContainer,children:fruitItems.map(function(item,index){return/*#__PURE__*/_jsx(ProductModel,{name:item.name,type:item.type,price:item.price,add:function add(){return _this4.addHandler(item.name,item.price);},remove:function remove(){return _this4.removeHandler(item.name,item.price);},count:_this4.countHandler(item.name),img:_this4.imageHandler(item.name)},item._id);})})]})});}}]);return Fruit;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{user:state.activeUser,productsArr:state.products};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onUpdateCart:function onUpdateCart(account){return dispatch({type:actionTypes.UPDATE_CART,account:account});}};};export default connect(mapStateToProps,mapDispatchToProps)(Fruit);","map":{"version":3,"sources":["/Users/alexforest/Desktop/OnlineStore/src/containers/Products/Fruit/Fruit.js"],"names":["classes","React","useState","useEffect","axios","connect","ProductModel","actionTypes","Cart","removeHandler","banana","organicBanana","blackberries","blueberries","pineapple","raspberries","redGrapes","strawberries","BottomBar","Fruit","state","products","fruit","JSON","parse","localStorage","getItem","console","log","i","length","type","push","setState","name","price","props","user","window","alert","data","prevCart","cart","product","count","updateCount","updatedAcc","concat","element","newAcc","patch","id","then","response","onUpdateCart","catch","err","cartArray","index2","splice","item","imgLibrary","img","result","filter","obj","userCart","fruitItems","FruitContainer","map","index","addHandler","countHandler","imageHandler","_id","Component","mapStateToProps","activeUser","productsArr","mapDispatchToProps","dispatch","account","UPDATE_CART"],"mappings":"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","sourcesContent":["import classes from './Fruit.module.css';\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport ProductModel from '../../../components/UI/ProductModel/ProductModel';\nimport * as actionTypes from '../../../store/actions/actionTypes';\n// import { remover } from '../../User/Cart/Cart';\nimport Cart, { removeHandler } from '../../User/Cart/Cart';\n//Images\nimport banana from '../../../assets/Fruit/Banana.jpg';\nimport organicBanana from '../../../assets/Fruit/OrganicBanana.jpg';\nimport blackberries from '../../../assets/Fruit/Blackberries.jpg';\nimport blueberries from '../../../assets/Fruit/Blueberries.jpg';\nimport pineapple from '../../../assets/Fruit/FreshPineapple.jpg';\nimport raspberries from '../../../assets/Fruit/Raspberries.jpg';\nimport redGrapes from '../../../assets/Fruit/RedSeedlessGrapes.jpg';\nimport strawberries from '../../../assets/Fruit/Strawberries.jpg';\nimport BottomBar from '../../../components/BottomBar/BottomBar';\n\nclass Fruit extends React.Component {\n\n    state = {\n        products: []\n    }\n\n    componentDidMount() {\n        let fruit = [];\n        let products = JSON.parse(localStorage.getItem('products'));\n        console.log(products);\n        for (let i = 0; i < products.length; i++) {\n            if (products[i].type === \"Fruit\") {\n                fruit.push(products[i]);\n            }\n        }\n        console.log(fruit);\n        this.setState({products: fruit})\n    }\n\n\n    addHandler(name, price) {\n        if (this.props.user === null) {\n            window.alert('Please log in or sign up to add items to cart.');\n        } else {\n            let data = {\n                prevCart: this.props.user.cart,\n                product: {\n                    name: name,\n                    price: price,\n                    count: 1\n                },\n                updateCount: false\n            }\n            \n            for (let i = 0; i < data.prevCart.length; i++) {\n                if (data.prevCart[i].name === data.product.name) {\n                    data.updateCount = true;\n                }\n            }\n\n            let updatedAcc;\n            if (!data.updateCount) {\n                updatedAcc = {\n                    ...this.props.user,\n                    cart: this.props.user.cart.concat(data.product)\n                }\n            } else {\n                let element;\n                for (let i = 0; i < this.props.user.cart.length; i++) {\n                    if (this.props.user.cart[i].name === data.product.name) {\n                        element = i;\n                    }\n                }\n                let newAcc = this.props.user.cart;\n                newAcc[element].count += 1;\n                updatedAcc = {\n                    ...this.props.user,\n                    cart: newAcc\n                }\n            }\n            \n\n            axios.patch(`http://onlinestoreserver.herokuapp.com/users/${this.props.user.id}/addProduct`, data)\n            .then(response => {\n                console.log(response);\n                this.props.onUpdateCart(updatedAcc);\n            })\n            .catch(err => {\n                console.log(err);\n            })\n        }\n    }\n\n    removeHandler(name, price) {\n        let data = {\n            prevCart: this.props.user.cart,\n            product: {\n                name: name,\n                price: price,\n                count: 1\n            },\n            updateCount: false\n        }\n        let cartArray = this.props.user.cart;\n\n        let index2 = -1;\n        for (let i = 0; i < cartArray.length; i++) {\n            if (cartArray[i].name === data.product.name) {\n                index2 = i;\n                if (cartArray[i].count > 1) {\n                    data.updateCount = true\n                }\n            }\n        }\n        if (!data.updateCount) {\n            if (index2 >= 0) {\n                cartArray.splice(index2, 1);\n            }\n        } else {\n            cartArray[index2].count -= 1\n        }\n        \n\n        let updatedAcc = {\n            ...this.props.user,\n            cart: cartArray\n        }\n       \n        //PATCH remove\n        axios.patch(`http://onlinestoreserver.herokuapp.com/users/${this.props.user.id}/removeProduct`, data)\n        .then(response => {\n            console.log(response);\n            this.props.onUpdateCart(updatedAcc);\n        })\n        .catch(err => {\n            console.log(err);\n        })\n        \n    }\n\n    imageHandler(item) {\n\n        let imgLibrary = [\n            { name: \"Banana\", img: banana },\n            { name: \"Organic Banana\", img: organicBanana },\n            { name: \"Strawberries\", img: strawberries },\n            { name: \"Blackberries\", img: blackberries },\n            { name: \"Fresh Pineapple\", img: pineapple},\n            { name: \"Red Seedless Grapes\", img: redGrapes },\n            { name: \"Raspberries\", img: raspberries },\n            { name: \"Blueberries\", img: blueberries }\n        ]\n\n        let result = imgLibrary.filter(obj => {\n            return obj.name === item\n        })\n\n        return result[0].img;\n    }\n\n    countHandler(item) {\n        if (this.props.user !== null) {\n            let userCart = this.props.user.cart;\n            let result = -1;\n            for (let i = 0; i < userCart.length; i++) {\n                if (userCart[i].name === item) {\n                    result = userCart[i].count;\n                }\n            }\n            if (result === -1) {\n                return 0;\n            } else {\n                return result;\n            }\n            //return result[0].count;\n        } else {\n            return 0;\n        }\n    }\n\n    render() {\n        let fruitItems = this.state.products;\n        /* for (let i = 0; i < this.state.products.length; i++) {\n            if (this.state.products[i].type === \"Fruit\") {\n                fruitItems.push(this.state.products[i]);\n            }\n        } */\n\n\n        return (\n            <React.Fragment>\n                <div className={classes.Fruit}>\n                    <h3>Fresh Fruit</h3>\n                    <div className={classes.FruitContainer}>\n                        {fruitItems.map((item, index) => {\n                            return <ProductModel name={item.name}\n                            type={item.type}\n                            price={item.price}\n                            key={item._id}\n                            add={() => this.addHandler(item.name, item.price)}\n                            remove={() => this.removeHandler(item.name, item.price)}\n                            count={this.countHandler(item.name)}\n                            img={this.imageHandler(item.name)}\n                            />;\n                        })}\n                    </div>\n                </div>\n            </React.Fragment>\n        )\n    }\n    \n}\n\nconst mapStateToProps = state => {\n    return {\n        user: state.activeUser,\n        productsArr: state.products\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onUpdateCart: (account) => dispatch({type: actionTypes.UPDATE_CART, account})\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Fruit);"]},"metadata":{},"sourceType":"module"}