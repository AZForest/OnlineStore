{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import classes from'../Fruit/Fruit.module.css';import React,{useState}from'react';import{connect}from'react-redux';import axios from'axios';import ProductModel from'../../../components/UI/ProductModel/ProductModel';import*as actionTypes from'../../../store/actions/actionTypes';//Images\nimport berryMedley from'../../../assets/Frozen/FrozenBerryMedley.jpg';import blackberries from'../../../assets/Frozen/FrozenBlackberries.jpg';import blueberries from'../../../assets/Frozen/FrozenBlueberries.jpg';import broccoli from'../../../assets/Frozen/FrozenBroccoliFlorets.jpg';import corn from'../../../assets/Frozen/FrozenCorn.jpg';import greenPeas from'../../../assets/Frozen/FrozenGreenPeas.jpg';import mixedVegetables from'../../../assets/Frozen/FrozenMixedVegetables.jpg';import strawberries from'../../../assets/Frozen/FrozenStrawberries.jpg';var Frozen=/*#__PURE__*/function(_React$Component){_inherits(Frozen,_React$Component);var _super=_createSuper(Frozen);function Frozen(){var _this;_classCallCheck(this,Frozen);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={products:[]};return _this;}_createClass(Frozen,[{key:\"componentDidMount\",value:function componentDidMount(){var fruit=[];var products=JSON.parse(localStorage.getItem('products'));for(var i=0;i<products.length;i++){if(products[i].type===\"Frozen\"){fruit.push(products[i]);}}this.setState({products:fruit});}},{key:\"addHandler\",value:function addHandler(name,price){var _this2=this;if(this.props.user===null){//this.props.history.push('auth');\nwindow.alert('Please log in to add items to cart');}else{var data={prevCart:this.props.user.cart,product:{name:name,price:price,count:1},updateCount:false};for(var i=0;i<data.prevCart.length;i++){if(data.prevCart[i].name===data.product.name){data.updateCount=true;}}var updatedAcc;if(!data.updateCount){updatedAcc=_objectSpread(_objectSpread({},this.props.user),{},{cart:this.props.user.cart.concat(data.product)});}else{var element;for(var _i=0;_i<this.props.user.cart.length;_i++){if(this.props.user.cart[_i].name===data.product.name){element=_i;}}var newAcc=this.props.user.cart;newAcc[element].count+=1;updatedAcc=_objectSpread(_objectSpread({},this.props.user),{},{cart:newAcc});}axios.patch(\"http://onlinestoreserver.herokuapp.com/users/\".concat(this.props.user.id,\"/addProduct\"),data).then(function(response){console.log(response);_this2.props.onUpdateCart(updatedAcc);}).catch(function(err){console.log(err);});}}},{key:\"removeHandler\",value:function removeHandler(name,price){var _this3=this;var data={prevCart:this.props.user.cart,product:{name:name,price:price,count:1},updateCount:false};var cartArray=this.props.user.cart;var index2=-1;for(var i=0;i<cartArray.length;i++){if(cartArray[i].name===data.product.name){index2=i;if(cartArray[i].count>1){data.updateCount=true;}}}if(!data.updateCount){if(index2>=0){cartArray.splice(index2,1);}}else{cartArray[index2].count-=1;}var updatedAcc=_objectSpread(_objectSpread({},this.props.user),{},{cart:cartArray});//PATCH remove\naxios.patch(\"http://onlinestoreserver.herokuapp.com/users/\".concat(this.props.user.id,\"/removeProduct\"),data).then(function(response){console.log(response);_this3.props.onUpdateCart(updatedAcc);}).catch(function(err){console.log(err);});}},{key:\"imageHandler\",value:function imageHandler(item){var imgLibrary=[{name:\"Frozen Berry Medley\",img:berryMedley},{name:\"Frozen Blackberries\",img:blackberries},{name:\"Frozen Blueberries\",img:blueberries},{name:\"Frozen Broccoli Florets\",img:broccoli},{name:\"Frozen Corn\",img:corn},{name:\"Frozen Green Peas\",img:greenPeas},{name:\"Frozen Mixed Vegetables\",img:mixedVegetables},{name:\"Frozen Strawberries\",img:strawberries}];var result=imgLibrary.filter(function(obj){return obj.name===item;});return result[0].img;}},{key:\"countHandler\",value:function countHandler(item){if(this.props.user!==null){var userCart=this.props.user.cart;var result=-1;for(var i=0;i<userCart.length;i++){if(userCart[i].name===item){result=userCart[i].count;}}if(result===-1){return 0;}else{return result;}}else{return 0;}}},{key:\"render\",value:function render(){var _this4=this;var frozenItems=this.state.products;/* for (let i = 0; i < this.state.products.length; i++) {\n            if (this.state.products[i].type === \"Frozen\") {\n                frozenItems.push(this.state.products[i]);\n            }\n        } */return/*#__PURE__*/_jsxs(\"div\",{className:classes.Fruit,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Frozen Fruit and Vegetables\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.FruitContainer,children:frozenItems.map(function(item,index){return/*#__PURE__*/_jsx(ProductModel,{name:item.name,type:item.type,price:item.price,add:function add(){return _this4.addHandler(item.name,item.price);},remove:function remove(){return _this4.removeHandler(item.name,item.price);},count:_this4.countHandler(item.name),img:_this4.imageHandler(item.name)},item._id);})})]});}}]);return Frozen;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{user:state.activeUser,productsArr:state.products};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onUpdateCart:function onUpdateCart(account){return dispatch({type:actionTypes.UPDATE_CART,account:account});},onInitProducts:function onInitProducts(productsArr){return dispatch({type:actionTypes.INIT_PRODUCTS,productsArr:productsArr});}};};export default connect(mapStateToProps,mapDispatchToProps)(Frozen);","map":{"version":3,"sources":["/Users/alexforest/Desktop/OnlineStore/src/containers/Products/Frozen/Frozen.js"],"names":["classes","React","useState","connect","axios","ProductModel","actionTypes","berryMedley","blackberries","blueberries","broccoli","corn","greenPeas","mixedVegetables","strawberries","Frozen","state","products","fruit","JSON","parse","localStorage","getItem","i","length","type","push","setState","name","price","props","user","window","alert","data","prevCart","cart","product","count","updateCount","updatedAcc","concat","element","newAcc","patch","id","then","response","console","log","onUpdateCart","catch","err","cartArray","index2","splice","item","imgLibrary","img","result","filter","obj","userCart","frozenItems","Fruit","FruitContainer","map","index","addHandler","removeHandler","countHandler","imageHandler","_id","Component","mapStateToProps","activeUser","productsArr","mapDispatchToProps","dispatch","account","UPDATE_CART","onInitProducts","INIT_PRODUCTS"],"mappings":"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","sourcesContent":["import classes from '../Fruit/Fruit.module.css';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport ProductModel from '../../../components/UI/ProductModel/ProductModel';\nimport * as actionTypes from '../../../store/actions/actionTypes';\n//Images\nimport berryMedley from '../../../assets/Frozen/FrozenBerryMedley.jpg';\nimport blackberries from '../../../assets/Frozen/FrozenBlackberries.jpg';\nimport blueberries from '../../../assets/Frozen/FrozenBlueberries.jpg';\nimport broccoli from '../../../assets/Frozen/FrozenBroccoliFlorets.jpg';\nimport corn from '../../../assets/Frozen/FrozenCorn.jpg';\nimport greenPeas from '../../../assets/Frozen/FrozenGreenPeas.jpg';\nimport mixedVegetables from '../../../assets/Frozen/FrozenMixedVegetables.jpg';\nimport strawberries from '../../../assets/Frozen/FrozenStrawberries.jpg';\n\nclass Frozen extends React.Component {\n\n    state = {\n        products: []\n    }\n\n    componentDidMount() {\n        let fruit = [];\n        let products = JSON.parse(localStorage.getItem('products'));\n        for (let i = 0; i < products.length; i++) {\n            if (products[i].type === \"Frozen\") {\n                fruit.push(products[i]);\n            }\n        }\n        this.setState({products: fruit})\n    }\n\n    addHandler(name, price) {\n        if (this.props.user === null) {\n            //this.props.history.push('auth');\n            window.alert('Please log in to add items to cart');\n        } else {\n            let data = {\n                prevCart: this.props.user.cart,\n                product: {\n                    name: name,\n                    price: price,\n                    count: 1\n                },\n                updateCount: false\n            }\n            \n            for (let i = 0; i < data.prevCart.length; i++) {\n                if (data.prevCart[i].name === data.product.name) {\n                    data.updateCount = true;\n                }\n            }\n\n            let updatedAcc;\n            if (!data.updateCount) {\n                updatedAcc = {\n                    ...this.props.user,\n                    cart: this.props.user.cart.concat(data.product)\n                }\n            } else {\n                let element;\n                for (let i = 0; i < this.props.user.cart.length; i++) {\n                    if (this.props.user.cart[i].name === data.product.name) {\n                        element = i;\n                    }\n                }\n                let newAcc = this.props.user.cart;\n                newAcc[element].count += 1;\n                updatedAcc = {\n                    ...this.props.user,\n                    cart: newAcc\n                }\n            }\n            \n\n            axios.patch(`http://onlinestoreserver.herokuapp.com/users/${this.props.user.id}/addProduct`, data)\n            .then(response => {\n                console.log(response);\n                this.props.onUpdateCart(updatedAcc);\n            })\n            .catch(err => {\n                console.log(err);\n            })\n        }\n    }\n\n    removeHandler(name, price) {\n        let data = {\n            prevCart: this.props.user.cart,\n            product: {\n                name: name,\n                price: price,\n                count: 1\n            },\n            updateCount: false\n        }\n        let cartArray = this.props.user.cart;\n\n        let index2 = -1;\n        for (let i = 0; i < cartArray.length; i++) {\n            if (cartArray[i].name === data.product.name) {\n                index2 = i;\n                if (cartArray[i].count > 1) {\n                    data.updateCount = true\n                }\n            }\n        }\n        if (!data.updateCount) {\n            if (index2 >= 0) {\n                cartArray.splice(index2, 1);\n            }\n        } else {\n            cartArray[index2].count -= 1\n        }\n        \n\n        let updatedAcc = {\n            ...this.props.user,\n            cart: cartArray\n        }\n       \n        //PATCH remove\n        axios.patch(`http://onlinestoreserver.herokuapp.com/users/${this.props.user.id}/removeProduct`, data)\n        .then(response => {\n            console.log(response);\n            this.props.onUpdateCart(updatedAcc);\n        })\n        .catch(err => {\n            console.log(err);\n        })\n        \n    }\n\n    imageHandler(item) {\n\n        let imgLibrary = [\n            { name: \"Frozen Berry Medley\", img: berryMedley },\n            { name: \"Frozen Blackberries\", img: blackberries },\n            { name: \"Frozen Blueberries\", img: blueberries },\n            { name: \"Frozen Broccoli Florets\", img: broccoli },\n            { name: \"Frozen Corn\", img: corn },\n            { name: \"Frozen Green Peas\", img: greenPeas },\n            { name: \"Frozen Mixed Vegetables\", img: mixedVegetables },\n            { name: \"Frozen Strawberries\", img: strawberries }\n        ]\n\n        let result = imgLibrary.filter(obj => {\n            return obj.name === item\n        })\n\n        return result[0].img;\n    }\n\n    countHandler(item) {\n        if (this.props.user !== null) {\n            let userCart = this.props.user.cart;\n            let result = -1;\n            for (let i = 0; i < userCart.length; i++) {\n                if (userCart[i].name === item) {\n                    result = userCart[i].count;\n                }\n            }\n            if (result === -1) {\n                return 0;\n            } else {\n                return result;\n            }\n        } else {\n            return 0;\n        }\n    }\n\n    render() {\n        \n        let frozenItems = this.state.products;\n        /* for (let i = 0; i < this.state.products.length; i++) {\n            if (this.state.products[i].type === \"Frozen\") {\n                frozenItems.push(this.state.products[i]);\n            }\n        } */\n\n        return (\n            <div className={classes.Fruit}>\n                <h3>Frozen Fruit and Vegetables</h3>\n                <div className={classes.FruitContainer}>\n                    {frozenItems.map((item, index) => {\n                        return <ProductModel name={item.name}\n                        type={item.type}\n                        price={item.price}\n                        key={item._id}\n                        add={() => this.addHandler(item.name, item.price)}\n                        remove={() => this.removeHandler(item.name, item.price)}\n                        count={this.countHandler(item.name)}\n                        img={this.imageHandler(item.name)}\n                        />;\n                    })}\n                </div>\n            </div>\n        )\n            \n    } \n}\n\nconst mapStateToProps = state => {\n    return {\n        user: state.activeUser,\n        productsArr: state.products\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onUpdateCart: (account) => dispatch({type: actionTypes.UPDATE_CART, account}),\n        onInitProducts: (productsArr) => dispatch({type: actionTypes.INIT_PRODUCTS, productsArr})\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Frozen);"]},"metadata":{},"sourceType":"module"}