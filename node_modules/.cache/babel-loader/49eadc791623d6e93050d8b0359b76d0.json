{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alexforest/Desktop/OnlineStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import classes from'./Account.module.css';import Order from'../../../components/UI/Order/Order';import{connect}from'react-redux';import axios from'axios';import*as actionTypes from'../../../store/actions/actionTypes';var Account=/*#__PURE__*/function(_React$Component){_inherits(Account,_React$Component);var _super=_createSuper(Account);function Account(){_classCallCheck(this,Account);return _super.apply(this,arguments);}_createClass(Account,[{key:\"deleteOrder\",value:function deleteOrder(order){var _this=this;console.log(order);console.log(this.props.user.orders);var data={orders:this.props.user.orders,delOrder:order};var orderArray=this.props.user.orders;var index=-1;for(var i=0;i<orderArray.length;i++){if(orderArray[i].id===data.delOrder.id){index=i;}}if(index>=0){orderArray.splice(index,1);}var updatedAcc=_objectSpread(_objectSpread({},this.props.user),{},{orders:orderArray});console.log(orderArray);axios.patch(\"http://onlinestoreserver.herokuapp.com/users/\".concat(this.props.user.id,\"/deleteOrder\"),data).then(function(response){console.log(response);_this.props.onUpdateCart(updatedAcc);}).catch(function(err){console.log(err);});}},{key:\"render\",value:function render(){var _this2=this;var orders=/*#__PURE__*/_jsx(\"p\",{style:{height:\"300px\"},children:\"You have not completed any orders\"});if(this.props.user!==null){if(this.props.user.orders.length>0){orders=this.props.user.orders.map(function(order){console.log(order);return/*#__PURE__*/_jsx(Order,{orderInfo:order,delete:function _delete(){return _this2.deleteOrder(order);}},Math.random());});}}return/*#__PURE__*/_jsxs(\"div\",{className:classes.Account,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your orders\"}),orders]});}}]);return Account;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{user:state.activeUser};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onUpdateCart:function onUpdateCart(account){return dispatch({type:actionTypes.UPDATE_CART,account:account});}};};export default connect(mapStateToProps,mapDispatchToProps)(Account);","map":{"version":3,"sources":["/Users/alexforest/Desktop/OnlineStore/src/containers/User/Account/Account.js"],"names":["React","classes","Order","connect","axios","actionTypes","Account","order","console","log","props","user","orders","data","delOrder","orderArray","index","i","length","id","splice","updatedAcc","patch","then","response","onUpdateCart","catch","err","height","map","deleteOrder","Math","random","Component","mapStateToProps","state","activeUser","mapDispatchToProps","dispatch","account","type","UPDATE_CART"],"mappings":"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","sourcesContent":["import React from 'react';\nimport classes from './Account.module.css';\nimport Order from '../../../components/UI/Order/Order';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport * as actionTypes from '../../../store/actions/actionTypes';\n\nclass Account extends React.Component {\n\n    deleteOrder(order) {\n        console.log(order);\n        console.log(this.props.user.orders);\n        let data = {\n            orders: this.props.user.orders,\n            delOrder: order\n        }\n\n        let orderArray = this.props.user.orders;\n\n        let index = -1;\n        for (let i = 0; i < orderArray.length; i++) {\n            if (orderArray[i].id === data.delOrder.id) {\n                index = i;\n            }\n        }\n        if (index >= 0) {\n            orderArray.splice(index, 1);\n        }\n\n        let updatedAcc = {\n            ...this.props.user,\n            orders: orderArray\n        }\n        console.log(orderArray);\n\n        axios.patch(`http://onlinestoreserver.herokuapp.com/users/${this.props.user.id}/deleteOrder`, data)\n        .then(response => {\n            console.log(response);\n            this.props.onUpdateCart(updatedAcc);\n        })\n        .catch(err => {\n            console.log(err);\n        })\n    }\n\n    render() {\n        let orders = <p style={{height: \"300px\"}}>You have not completed any orders</p>;\n        if (this.props.user !== null) {\n            if (this.props.user.orders.length > 0) {\n                orders = this.props.user.orders.map(order => {\n                    console.log(order);\n                    return <Order key={Math.random()} orderInfo={order} delete={() => this.deleteOrder(order)}/>\n                })\n            }\n            \n        }\n        return (\n            <div className={classes.Account}>\n                <h2>Your orders</h2>\n                {orders}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        user: state.activeUser\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onUpdateCart: (account) => dispatch({type: actionTypes.UPDATE_CART, account})\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Account);"]},"metadata":{},"sourceType":"module"}